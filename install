#!/bin/sh

mkdir -p ~/.config

printf "Checking if HOME is parent of current dir...\n"

dotfiles=$(pwd)

cd ..
parent=$(pwd)

cd "$dotfiles"

if [ "$parent" = "$HOME" ]; then
    printf "Parent is HOME, continuing\n"
else
    printf "Parent is not HOME!!\n"
    exit 1
fi

if [ -x "$(command -v stow)" ]; then
    printf "Continuing to main logic\n"
else
    printf "Stow is not installed!!\n"
    exit 1
fi

printf "Do you want to install every package, or only some? (answer every or some): "

read -r answer

if [ "$answer" = "every" ]; then
    rm ~/.config/starship.toml -f
    rm ~/.emacs.d/init.el -f 
    rm ~/.emacs.d/config.org -f
    rm ~/.zshrc -f
    rm ~/.tmux.conf -f
    rm ~/.nanorc -f
    rm -rf ~/.emacs.d/lisp
    stow */
elif [ "$answer" = "some" ]; then
    printf "Package to install?: "
    read -r package
    if [ "$package" = "" ]; then
	printf "No package!!\n"
	exit 1
    fi
    stow $package
else
    printf "Bad answer!!\n"
    exit 1
fi
